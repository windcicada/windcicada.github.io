# AECSC-IBM UserGuide


# AECSC-IBM用户手册

## 文件结构

* 源文件夹(./SRC)
* 可执行文件夹(./EXEC)
* * 背景网格文件夹(./EXEC/Decomp)
* * IBM网格存储文件夹(./EXEC/imbmesh)
* * IBM主程序(./EXEC/aecsc)
* * 后处理(./EXEC/Restart)
* * Visit(./EXEC/Restart), 其中标量imbflag为流固标记(流体1，固体0)

## imb.d 文件

1. xxx.STL  `模型名`
2. 0或1  `1表示几何模型为固壁区域，0表示几何模型为流体区域`
3. 0或1  `1表示Y轴方向网格为直线，0表示网格Y轴扭曲(生成网格速度慢，不建议)`
4. 0或1  `1表示读取已有浸没边界网格标记，0表示重新生成网格标记`
5. 0或1  `1表示输出网格标记，0表示不输出`
6. 0或1  `1补全空洞(网格密度低、质量差时可调用)，0表示不处理`
7. 0或1  `1表示计算法向量，0表示不计算`
8. 0或1  `1表示调用壁面函数，0表示不调用，其他数(如2)表示调用不含法向量的壁面函数`
9. 0或1  `1表示流体非壁面区(与壁面间接相邻的网格)壁面处理，0表示不处理流体非壁面区`
10. 0.0~1.0 `[第9行为1时生效]流体非壁面区(与壁面间接相邻的网格)速度处理权重，0.0为不处理，1.0为不允许沿壁面法向流动`
11. 0或1  `[第8行为1时生效]1表示全邻居函数(线邻居和点邻居壁面处理)，0表示面邻居函数`
12. 0或1  `1表示浸没边界角落网格用插值方法计算，0表示角落网格作为普通流体边界计算`
13. 0或1  `1表示计算法向量，0表示不计算`

## input.d 文件

```input.d
C-----------------------------------------------------------------------
C   LOAD BALANCING
C-----------------------------------------------------------------------
false				/use if number blocks > number of cores 是否自由分配CPU，否即block数>CPU数
C-----------------------------------------------------------------------
C   INPUT/OUTPUT DIRECTORIES:
C-----------------------------------------------------------------------
/Decomp/				/读取网格文件夹
/Restart/				/读取RESTART数据文件夹
/Restart/				/读取PDF_RESTART数据文件夹
C-----------------------------------------------------------------------
C   COMMAND PARAMETERS
C-----------------------------------------------------------------------
true		    /FORM		                        网格是否有格式（边界代码有无表头）
false  true   	/RESTART, WRITE TO RESTART   	    是否继续，是否保存中间文件
40000			/LSTEP								最大迭代次数
50 				/stepsave :  write restart file interval	保存中间文件间隔迭代次数（覆盖）
500				/stepplot :  write plot file interval		保存输出文件间隔迭代次数（新建）
C-----------------------------------------------------------------------
C... Large Eddy Simulation
C-----------------------------------------------------------------------
true  false false   /DYN_STRESS,SIMIL,DYNPHI	       是否采用动态压力模型，无用，？
true false			/DYN_RESTART_STRESS,DYNPHI_RESTART 是否保存动态压力中继文件，DYNPHI中继文件
0.1 0.09 0.09 	    /SMAGORINSKY CONSTANT,CXIA,CXIS	   smagorinsky常数，？，无用
false false         /TURBSTAT,TURBREAD				   是否求湍流平均值，是否读取湍流平均值
false               /Digital Filter inflow	           是否采用虚拟湍流进口
C-----------------------------------------------------------------------
C... Some miscellaneous variables
C-----------------------------------------------------------------------
2 	       	        /ITNUM					每步迭代次数
10000000 			/INTEGRATION TIME	    最大计算时间长
10000000			/NSKIP					输出结果跳过间隔
C-----------------------------------------------------------------------
C... CFL variables
C-----------------------------------------------------------------------
0.20 0.30 0.25			/CFLMIN,CFLMAX,CFL_OK		最小CFL数，最大CFL数，最优CFL数
C-----------------------------------------------------------------------
C... Convection velocity: used only for convective outflow
C-----------------------------------------------------------------------
0.0 0.0 0.0                     /vx_c, vy_c, vz_c		边界速度x，y，z方向
C-----------------------------------------------------------------------
C... Wall clock execution time in seconds
C-----------------------------------------------------------------------
0.0	                        /TEXEC					最大运行小时数
C-----------------------------------------------------------------------
C... Some physical properties
C-----------------------------------------------------------------------
1.1965 1.8173 1.814E-5 1.01325e+05  !RHOAIR, RHOJET, VISCO, PRESSURE		
	      空气密度，燃料密度，空气动力粘度，空气压力
C-----------------------------------------------------------------------
C   Variable
C-----------------------------------------------------------------------
  50	1.0e-04     /U-VEL 1 ICYCL(),TOL()		x方向速度迭代残差累积步数，迭代残差
  51	1.0e-04     /V-VEL 2 ICYCL(),TOL()		y方向速度迭代残差累积步数，迭代残差
  50	1.0e-04     /W-VEL 3 ICYCL(),TOL()		z方向速度迭代残差累积步数，迭代残差
  500	1.0e-04     /DP    4 ICYCL(),TOL()		压力迭代残差累积步数，迭代残差
   0	1.0e-03     /F     5 ICYCL(),TOL()		混合分数迭代残差累积步数，迭代残差
   0	1.0e-03     /F''   6 ICYCL(),TOL()		混合分数脉动迭代残差累积步数，迭代残差
C-----------------------------------------------------------------------
C... Combustion variables 
C-----------------------------------------------------------------------
methane   /fuel; methanol,methane,ethylene,n-heptane,propane,kerosene,ethanol		
						燃料，依次为甲醇、甲烷、乙烯、正庚烷、丙烷、煤油、乙醇
C-----------------------------------------------------------------------
true		/BURN 				是否点燃，即化学反应
C-----------------------------------------------------------------------
C... PDF equation variables
C-----------------------------------------------------------------------
true 		        /solve for PDF					是否求解PDF方程
2                   /number of stochastic fields	随机场数目
false true			/READ_PDF,WRITE_PDF				是否读取PDF中继文件，是否保存PDF文件
true                /stochastic noise reduction		是否采用随机降噪
10    1.0e-03	    /ICYCL(),TOL()					迭代残差累积步数，迭代残差
C-----------------------------------------------------------------------
C   Radiative Heat Transfer
C-----------------------------------------------------------------------
false				/Include radiate heat transfer: true/false	是否包含辐射换热
C----------------------------- ------------------------------------------
C   SPRAY
C-----------------------------------------------------------------------
/SPRAY/				/喷雾粒子存储文件夹，okc格式，visit可读取
true	/solve spray equations								         是否喷雾
1.0 	/c0 - dispersion coefficientInvalid LOGICAL input (unit= 0). 扩散系数
true	/ reflection of particles on boundary ? If false sticking 	 是否发生粒子反射
true true 	/ MASS AND MOMENTUM Coupling of GAS and LIQUID EQUATIONS 是否气液相质量耦合,动量耦合
C-----------------------------------------------------------------------
C  VAPORISATION PARAMETERS
true			/ Vaporise										粒子是否蒸发
true			/ Stochastic vapourisation model				是否使用随机蒸发模型
1.0			/ Cv - vaporisation coefficient						蒸发系数
C-----------------------------------------------------------------------
C  BREAK UP PARAMETERS 
false		/ Breakup 											粒子是否破碎
false 2.0	/stochasic breakup ; csb - sgs erosion coefficient	是否使用随机破碎模型，亚格子冲刷系数
C-------------------------------------------------------------------
false   	/DEBUG: debugging information for spray	            是否启用喷雾调试模式
C-----------------------------------------------------------------------
C   Save, Start and Restart 
C-----------------------------------------------------------------------
10000   		/ SNAPSHOT OF THE SPRAY							路径EXEC/Visit/Spray，保存喷雾参数文件间隔迭代次数（新建）
true true       / read spray PDF file; write spray PDF file     是否读取喷雾pdf文件，是否保存喷雾pdf文件
false false		/ spray statistics; read spray statistics	    是否输出喷雾参数文件，是否读取喷雾参数文件
C-----------------------------------------------------------------------

```

## inject_def 喷雾配置文件

```inject_def.d
C-----------------------------------------------------------------------
C :::::::: FILE DEFINING THE INJECTION CHARACTERISTICS ::::::
C-----------------------------------------------------------------------    
0.0 0.0 0.0       ! x,y,z 喷射点位置 
0.000115	  	  ! 喷孔半径  
1.0 0.0 0.0		  ! 喷射方向矢量
0.0 30.0          ! 偏转角度 & 扩散角度
true              ! 是否空心喷雾
C-----------------------------------------------------------------------
100    			  ! 粒子直径数目 
1				  ! 每种直径的粒子数  
C-----------------------------------------------------------------------  
2.5 63.0      	  ! R-R积分分布：指数n，平均直径smd 
8.6E-04           ! 质量流量 [Kg/sec] 
C-----------------------------------------------------------------------
C Droplet properties: velocity magnitude, temperature [ Kelvin ] :::::::
C-----------------------------------------------------------------------
15.0 301.0   	  ! 液滴速度 [m/s] & 温度 [K]
C-----------------------------------------------------------------------
false  			  ! 是否读取中继喷射数据
C-----------------------------------------------------------------------
true			  ! 是否在不同位置用指定SMD的空心圆锥喷雾
```

## spark.d 点火配置文件

```spark.d
C-----------------------------------------------------------------------
C  Input file for the ED spark model
C-----------------------------------------------------------------------
true     	! spark: true or false 
0.005           ! spark duration time (s)
0.005          ! spark initiation time (s)
550.0 2000.0	! initial air Temperature and maximum temperature (K)
2		! number of sparks
0.015 0.0 0.01
-0.015 0.0 0.01
2               !spark_type，1为原ED模型，2为IBM稳定点火模型（2容易点着火）

```
